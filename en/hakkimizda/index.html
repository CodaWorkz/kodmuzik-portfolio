<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>About - Kodmüzik</title>
    <meta
      name="description"
      content="KOD Müzik has programmed and produced concerts and special series since the late 1990s"
    />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Anton&family=Inter:wght@300;500&display=swap"
      rel="stylesheet"
    />

    <!-- Global Styles -->
    <link rel="stylesheet" href="/css/main.css" />
    <!-- About Page Styles -->
    <link rel="stylesheet" href="/css/about.css" />
  </head>
  <body>
    <!-- Skip to content link for screen readers -->
    <a href="#main-content" class="skip-to-content">Skip to content</a>

    <!-- Side Menu -->
    <nav class="side-menu" aria-label="Main menu">
      <!-- Logo/Home -->
      <a href="/en" class="menu-logo" aria-label="Kodmüzik home">
        <img
          src="/KodLogo.svg"
          alt="Kodmüzik logo"
          class="menu-logo-img"
          loading="eager"
          decoding="async"
        />
        <span class="menu-logo-caption" aria-hidden="true"
          ><span class="menu-logo-letter">K</span
          ><span class="menu-logo-letter">O</span
          ><span class="menu-logo-letter">D</span
          ><span class="menu-logo-letter">M</span
          ><span class="menu-logo-letter">Ü</span
          ><span class="menu-logo-letter">Z</span
          ><span class="menu-logo-letter">İ</span
          ><span class="menu-logo-letter">K</span></span
        >
      </a>

      <!-- Navigation -->
      <div class="menu-nav">
        <ul class="menu-items">
          <li class="menu-item">
            <a href="/en/hakkimizda" class="menu-link" data-path="/hakkimizda"
              >ABOUT</a
            >
          </li>
          <li class="menu-item">
            <a href="/en/etkinlikler" class="menu-link" data-path="/etkinlikler"
              >PAST</a
            >
          </li>
          <li class="menu-item">
            <a
              href="/en/gelecek-etkinlikler"
              class="menu-link"
              data-path="/gelecek-etkinlikler"
              >FUTURE</a
            >
          </li>
          <li class="menu-item">
            <a href="/en/iletisim" class="menu-link" data-path="/iletisim"
              >CONTACT</a
            >
          </li>
        </ul>
      </div>

      <!-- Language Toggle -->
      <div class="lang-toggle-menu" aria-label="Language selection">
        <div class="lang-switcher" role="group" aria-label="Language selection">
          <a href="/hakkimizda" class="lang-link" id="lang-tr" hreflang="tr" lang="tr">TR</a>
          <a href="/en/hakkimizda" class="lang-link" id="lang-en" hreflang="en" lang="en">EN</a>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content" class="main-content">
      <div class="about-container">
        <article class="about-content">
          <h1 class="about-title">ABOUT</h1>

          <div class="about-text">
            <p>
              Kod Müzik emerged in the Turkish music scene in late 1995, originally established as a retail outlet dedicated to independent music. During its formative years (1996–2005), it played a significant role in shaping the landscape of cross-genre independent music by acting as a distributor for pivotal record labels. Additionally, between 1996 and 2001, the brand functioned as a record label itself, releasing genre-defying local underground albums and curating various compilations.
            </p>

            <p>
              From 1999 onward, the company expanded its operations to include live event management across a vast musical spectrum—spanning pop, rock, jazz, electronic, experimental, and avant-garde genres. Kod Müzik has organized events ranging from intimate gigs to large-scale productions and festivals, hosting a diverse roster of artists that bridges the gap between mainstream stars and deep underground acts.
            </p>

            <p>
              The company has forged strategic alliances with major event organizers (such as Pozitif and BKM) and leading cultural foundations (including İKSV and the Kocabıyık Foundation). It has also provided content curation, booking, and production services for Turkey's most prestigious cultural venues—such as the Cemal Reşit Rey Concert Hall (CRR), the Presidential Symphony Orchestra (CSO), Zorlu PSM, and the Atatürk Cultural Center (AKM). Furthermore, Kod Müzik has collaborated with official state institutions, including the Ministry of Culture and Tourism and major metropolitan municipalities (Istanbul and Izmir). Kod Müzik remains active today, continuing its work in concert organization and institutional partnerships.
            </p>
          </div>

          <!-- Emotional Journey Link -->
          <div class="journey-link-container">
    <button class="media-button" id="journeyButton" aria-label="Click here to know the real KOD story">
        <span class="media-button-icon" aria-hidden="true"></span>
    </button>
    <span class="journey-text">Click here to know the real KOD story</span>
    </div>
    </main>

    <!-- Lightbox Overlay -->
    <div class="lightbox-overlay" id="journeyLightbox" aria-hidden="true">
      <div class="lightbox-container">
        <button class="lightbox-close" id="closeLightbox" aria-label="Close">
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M18 6L6 18M6 6L18 18"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button>
        <div class="lightbox-content">
          <h2 class="lightbox-title" id="journeyTitle">Loading...</h2>
          <div class="lightbox-text" id="journeyContent">
            <!-- Content will be loaded here -->
          </div>
        </div>
      </div>
    </div>

    <!-- Global Scripts -->
    <script src="/js/main.js" defer></script>

    <!-- Journey Content Script -->
    <script>
    document.addEventListener("DOMContentLoaded", async function () {
    const journeyButton = document.getElementById("journeyButton");
    const lightbox = document.getElementById("journeyLightbox");
    const closeButton = document.getElementById("closeLightbox");
    const titleElement = document.getElementById("journeyTitle");
    const contentElement = document.getElementById("journeyContent");
    let journeyData = null;
    
    // Check if button exists
    if (!journeyButton) {
      console.error("Journey button not found!");
      return;
    }

    // Load journey content
    async function loadJourneyContent() {
      if (journeyData) return journeyData;

      try {
        // Use correct JSON file based on language
        const isEnglish = window.location.pathname.includes('/en/');
        const jsonFile = isEnglish ? "/kod_about_en.json" : "/kod_about_tr.json";
        const response = await fetch(jsonFile);
        journeyData = await response.json();
        return journeyData;
      } catch (error) {
        console.error("Error loading journey content:", error);
        const isEnglish = window.location.pathname.includes('/en/');
        return {
          heading: isEnglish ? "Content Could Not Be Loaded" : "İçerik Yüklenemedi",
          paragraphs: [
            isEnglish 
              ? "Sorry, the content cannot be loaded at this time. Please try again later."
              : "Üzgünüz, içerik şu anda yüklenemiyor. Lütfen daha sonra tekrar deneyin."
          ],
        };
      }
    }

    // Open lightbox
    async function openLightbox() {
      const data = await loadJourneyContent();

      titleElement.textContent = data.heading;
      contentElement.innerHTML = data.paragraphs
        .map((p) => `<p>${p}</p>`)
        .join("");

      lightbox.classList.add("active");
      lightbox.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";

      // Focus management
      closeButton.focus();
    }

    // Close lightbox
    function closeLightbox() {
      lightbox.classList.remove("active");
      lightbox.setAttribute("aria-hidden", "true");
      document.body.style.overflow = "";

      // Return focus to button
      journeyButton.focus();
    }

    // Event listeners
    journeyButton.addEventListener("click", openLightbox);
    closeButton.addEventListener("click", closeLightbox);

    // Close on overlay click
    lightbox.addEventListener("click", function (e) {
      if (e.target === lightbox) {
        closeLightbox();
      }
    });

    // Close on Escape key
    document.addEventListener("keydown", function (e) {
      if (e.key === "Escape" && lightbox.classList.contains("active")) {
        closeLightbox();
      }
    });
  });
  </script>
  </body>
</html>
